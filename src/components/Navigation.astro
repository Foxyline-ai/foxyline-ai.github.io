---
interface Props {
  currentPage?: string;
}

const { currentPage = "" } = Astro.props;

import Logo from './Logo.astro';
---

<nav class="fixed top-0 left-0 right-0 z-50 px-6 md:px-8 py-4 md:py-6" style="background-color: rgba(249, 247, 244, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid var(--color-natural-beige);">
  <div class="max-w-6xl mx-auto flex justify-between items-center">
    <a href="/" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
      <Logo size={32} wordmarkSize={18} />
    </a>

    <!-- Desktop Menu -->
    <div class="hidden md:flex items-center gap-8">
      <a
        href="/solutions"
        class="nav-link transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 15px; color: ${currentPage === 'services' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'services' ? '500' : '400'}; text-decoration: none;`}
      >
        Solutions
      </a>
      <a
        href="/realisations"
        class="nav-link transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 15px; color: ${currentPage === 'realisations' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'realisations' ? '500' : '400'}; text-decoration: none;`}
      >
        Case Studies
      </a>
      <a
        href="/process"
        class="nav-link transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 15px; color: ${currentPage === 'process' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'process' ? '500' : '400'}; text-decoration: none;`}
      >
        Approche
      </a>
      <a
        href="/a-propos"
        class="nav-link transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 15px; color: ${currentPage === 'a-propos' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'a-propos' ? '500' : '400'}; text-decoration: none;`}
      >
        À propos
      </a>
      <a
        href="/contact"
        class="px-6 py-2 rounded-lg transition-all hover:shadow-md hover:scale-105 focus:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"
        style="background-color: var(--color-copper); color: white; font-family: Outfit, sans-serif; font-size: 15px; font-weight: 400; text-decoration: none; --tw-ring-color: var(--color-copper);"
      >
        Démarrer un projet
      </a>
    </div>

    <!-- Mobile CTA & Menu Button -->
    <div class="md:hidden flex items-center gap-3">
      <a
        href="/contact"
        class="px-4 py-2 rounded-lg transition-all"
        style="background-color: var(--color-copper); color: white; font-family: Outfit, sans-serif; font-size: 14px; font-weight: 400; text-decoration: none; white-space: nowrap;"
      >
        Contact
      </a>
      <button
        id="mobile-menu-button"
        class="p-2 rounded-lg transition-colors hover:bg-[rgba(212,196,172,0.2)]"
        aria-label="Toggle menu"
        aria-expanded="false"
      >
        <svg
          id="menu-icon"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          style="color: var(--color-forest);"
        >
          <line x1="3" y1="6" x2="21" y2="6" stroke-width="2" stroke-linecap="round"></line>
          <line x1="3" y1="12" x2="21" y2="12" stroke-width="2" stroke-linecap="round"></line>
          <line x1="3" y1="18" x2="21" y2="18" stroke-width="2" stroke-linecap="round"></line>
        </svg>
        <svg
          id="close-icon"
          class="hidden"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          style="color: var(--color-forest);"
        >
          <line x1="18" y1="6" x2="6" y2="18" stroke-width="2" stroke-linecap="round"></line>
          <line x1="6" y1="6" x2="18" y2="18" stroke-width="2" stroke-linecap="round"></line>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden mt-4 pt-4 border-t"
    style="border-color: var(--color-natural-beige);"
  >
    <div class="flex flex-col space-y-4">
      <a
        href="/solutions"
        class="mobile-nav-link py-2 transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 16px; color: ${currentPage === 'services' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'services' ? '500' : '400'}; text-decoration: none;`}
      >
        Solutions
      </a>
      <a
        href="/realisations"
        class="mobile-nav-link py-2 transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 16px; color: ${currentPage === 'realisations' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'realisations' ? '500' : '400'}; text-decoration: none;`}
      >
        Case Studies
      </a>
      <a
        href="/process"
        class="mobile-nav-link py-2 transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 16px; color: ${currentPage === 'process' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'process' ? '500' : '400'}; text-decoration: none;`}
      >
        Approche
      </a>
      <a
        href="/a-propos"
        class="mobile-nav-link py-2 transition-colors"
        style={`font-family: Outfit, sans-serif; font-size: 16px; color: ${currentPage === 'a-propos' ? 'var(--color-copper)' : 'var(--color-deep-sage)'}; font-weight: ${currentPage === 'a-propos' ? '500' : '400'}; text-decoration: none;`}
      >
        À propos
      </a>
      <a
        href="/contact"
        class="inline-block text-center px-6 py-3 rounded-lg transition-all"
        style="background-color: var(--color-copper); color: white; font-family: Outfit, sans-serif; font-size: 16px; font-weight: 400; text-decoration: none;"
      >
        Démarrer un projet
      </a>
    </div>
  </div>
</nav>

<style>
  .nav-link:hover,
  .nav-link:focus {
    color: var(--color-copper);
    outline: none;
  }

  .mobile-nav-link:hover,
  .mobile-nav-link:focus {
    color: var(--color-copper);
    outline: none;
  }
</style>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  if (mobileMenuButton && mobileMenu && menuIcon && closeIcon) {
    mobileMenuButton.addEventListener('click', () => {
      const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());
      mobileMenu.classList.toggle('hidden');
      menuIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
    });

    const mobileLinks = mobileMenu.querySelectorAll('a');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
        mobileMenuButton.setAttribute('aria-expanded', 'false');
      });
    });

    window.addEventListener('resize', () => {
      if (window.innerWidth >= 768) {
        mobileMenu.classList.add('hidden');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
        mobileMenuButton.setAttribute('aria-expanded', 'false');
      }
    });
  }
</script>
